!function(n,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-utils"),require("elliptical-mutation-summary")):"function"==typeof define&&define.amd?define(["elliptical-utils","elliptical-mutation-summary"],t):(n.elliptical=n.elliptical||{},n.elliptical.binding=t(n.elliptical.utils,n.elliptical.mutation.summary),n.returnExports=n.elliptical.binding)}(this,function(n,t){function e(){$(document).on("OnDocumentMutation",function(n,t){t.added&&r(t.added),t.removed&&d(t.removed)})}function o(){var n=document.querySelectorAll(h);n.length&&setTimeout(function(){r(n)},x)}function i(){return"ontouchend"in document?"touchstart":"click"}function c(){return"ontouchend"in document?"touchend":"click"}function u(){return"ontouchend"in document?"tap":"click"}function l(n,t){b||e(),b=!0;var o=N.obj;o.fn=t,o.context=this,y.set(n,o),this.click=i(),this.press=c(),this.tap=u()}function r(n){y.forEach(function(t,e){var o=$(n).selfFind("["+v+'="'+e+'"]');o[0]&&$.each(o,function(n,o){var i=m.id(8);o._EA_BINDING_ID=i;var c=_.obj;c.node=o,c.context=t.context,c.attrValue=e,c.fn=t.fn,I.set(i,c),a(t.context,o,t.fn)})})}function a(n,t,e){setTimeout(function(){e.call(n,t)},g)}function d(n){var t=$(n).selfFind(h);t.length&&t.length>0&&$.each(t,function(n,t){t._EA_BINDING_ID&&f(t)})}function f(n){var t=n._EA_BINDING_ID,e=I.get(t);void 0===e?p(n):s(e,n,t)}function s(n,t,e){n.context.dispose(),n.context=null,t&&t.parentNode&&t.parentNode.removeChild(t),n.fn=null,n.node=null,I["delete"](e)}function p(n){I.forEach(function(t,e){n===e.node&&s(e,n,t)})}var m=n.random,h="[ea-bind]",v="ea-bind",b=!1,g=500,x=250,y=new Map,I=new Map;t.connect();var N={get obj(){return{fn:null,context:null}}},_={get obj(){return{node:null,context:null,fn:null,attrValue:null}}};return document.addEventListener("WebComponentsReady",function(n){o()}),$(function(){void 0===window.WebComponents&&o()}),l.prototype.jsonParseMessage=function(n){try{var t=JSON.parse(n);return t.message?t.message:n}catch(e){return n}},l.prototype.dispose=function(){},function(n,t){return new l(n,t)}});